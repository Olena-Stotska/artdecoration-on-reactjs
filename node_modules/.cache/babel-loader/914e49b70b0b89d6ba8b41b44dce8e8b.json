{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nexports.__esModule = true;\n\nvar React = require(\"react\");\n\nvar mdflavors_1 = require(\"./mdflavors\");\n\nfunction isString(s) {\n  return typeof s === 'string' || s instanceof String;\n}\n\nfunction isObject(o) {\n  return typeof o === 'object';\n}\n\nfunction isFunction(o) {\n  return typeof o === 'function';\n}\n\nfunction get(obj, path) {\n  var spath = path.split('.');\n\n  for (var i = 0, len = spath.length; i < len; i++) {\n    if (!obj || !isObject(obj)) return undefined;\n    obj = obj[spath[i]];\n  }\n\n  return obj;\n}\n\nfunction first(o) {\n  for (var k in o) {\n    if (k != '__') return o[k];\n  }\n}\n\nfunction flatten(l) {\n  var r = [];\n  var s = '';\n\n  var flush = function () {\n    return s && (r.push(s), s = '');\n  };\n\n  for (var _i = 0, l_1 = l; _i < l_1.length; _i++) {\n    var i = l_1[_i];\n    if (i == null) continue;\n\n    if (isString(i)) {\n      s += i;\n    } else {\n      flush();\n      r.push(i);\n    }\n  }\n\n  flush();\n  return r.length > 1 ? r : r.length ? r[0] : null;\n}\n\nvar matcher =\n/** @class */\nfunction () {\n  function matcher(mdFlavor, inter, self) {\n    this.mdFlavor = mdFlavor;\n    this.inter = inter;\n    this.self = self;\n  }\n\n  matcher.prototype.M = function (value) {\n    if (!value) return null;\n    var m = mdflavors_1.mdMatch(this.mdFlavor, value);\n    if (!m) return value;\n    var middle = null;\n\n    switch (m.tag) {\n      case \"inter\":\n        middle = this.inter && this.inter(m.body);\n        break;\n\n      case \"self\":\n        middle = this.self && this.self(m.body);\n        break;\n\n      case \"literals\":\n      case \"literal\":\n        middle = m.body;\n        break;\n\n      default:\n        middle = React.createElement(m.tag, {\n          key: m.tag + m.body\n        }, this.M(m.body));\n        break;\n    }\n\n    return flatten([this.M(m.head), middle, this.M(m.tail)]);\n  };\n\n  return matcher;\n}();\n\nfunction rangeHit(node, val) {\n  for (var t in node) {\n    if (!node.hasOwnProperty(t)) continue;\n    var range = t.match(/^(-?\\d+)\\.\\.(-?\\d+)$/);\n\n    if (range && +range[1] <= val && val <= +range[2]) {\n      return node[t];\n    }\n  }\n}\n\nfunction resolveContextPath(node, p, path, context) {\n  var key = path[p];\n  var trans;\n\n  if (key != null && context[key] != null) {\n    trans = get(node, context[key].toString());\n\n    if (trans == null && +context[key] === context[key]) {\n      trans = rangeHit(node, +context[key]);\n    }\n  }\n\n  if (trans == null) trans = node._;\n  if (trans == null) trans = first(node);\n\n  if (trans != null && !isString(trans)) {\n    return resolveContextPath(trans, p + 1, path, context);\n  }\n\n  return trans;\n}\n\nfunction resolveContext(node, context) {\n  if (context == null) {\n    return resolveContextPath(node, 0, [], null);\n  } else if (!isObject(context)) {\n    return resolveContextPath(node, 0, ['_'], {\n      _: context\n    });\n  } else {\n    var ctx_keys = [];\n\n    if (node.__) {\n      ctx_keys = node.__.split('.');\n    } else {\n      for (var k in context) {\n        if (!context.hasOwnProperty(k)) continue;\n        ctx_keys.push(k);\n      }\n    }\n\n    return resolveContextPath(node, 0, ctx_keys, context);\n  }\n}\n\nvar MDText =\n/** @class */\nfunction () {\n  function MDText(texts, opt) {\n    this.texts = texts;\n    this.MDFlavor = 0; // public access is deprecated\n\n    this.notFound = undefined;\n    this.p = this.factory('p');\n    this.span = this.factory('span');\n    this.li = this.factory('li');\n    this.div = this.factory('div');\n    this.button = this.factory('button');\n    this.a = this.factory('a');\n    this.text = this.factory(null);\n    this.setOpts(opt);\n  }\n\n  MDText.prototype.setTexts = function (texts, opt) {\n    this.texts = texts;\n    this.setOpts(opt);\n  };\n\n  MDText.prototype.setOpts = function (opt) {\n    if (!opt) return;\n    if (opt.notFound !== undefined) this.notFound = opt.notFound;\n    if (opt.MDFlavor !== undefined) this.MDFlavor = opt.MDFlavor;\n  };\n\n  MDText.prototype.interpolate = function (exp, vars) {\n    var _a = exp.split(','),\n        vn = _a[0],\n        flags = _a[1];\n\n    var v = get(vars, vn);\n\n    if (v == null) {\n      return null;\n    } else if (React.isValidElement(v)) {\n      return React.cloneElement(v, {\n        key: 'r'\n      });\n    }\n\n    var vs;\n\n    if (flags && flags.match(/l/)) {\n      vs = v.toLocaleString();\n    } else {\n      vs = v.toString();\n    }\n\n    return vs;\n  };\n\n  MDText.prototype.format = function (value, vars) {\n    var _this = this;\n\n    if (!value) return value;\n    return new matcher(mdflavors_1.mdFlavors[this.MDFlavor], function (exp) {\n      return _this.interpolate(exp, vars);\n    }, function (exp) {\n      return _this.translate(exp, vars);\n    }).M(value);\n  };\n\n  MDText.prototype.translate = function (key, options) {\n    if (!key) return key;\n    var trans = get(this.texts, key);\n    var context = options && options.context;\n\n    if (trans != null && !(isString(trans) || isFunction(trans))) {\n      trans = resolveContext(trans, context);\n    }\n\n    if (trans == null) {\n      trans = options && options.notFound !== undefined ? options.notFound : this.notFound !== undefined ? this.notFound : key;\n    }\n\n    if (isFunction(trans)) {\n      trans = trans(key, context);\n    }\n\n    return this.format(trans, options);\n  };\n\n  MDText.prototype.factory = function (tagF) {\n    var _this = this; // name High Order Function for React Dev tools\n\n\n    var MDText = function (props) {\n      var text = props.text,\n          tag = props.tag,\n          restProps = __rest(props, [\"text\", \"tag\"]);\n\n      var key;\n      var options;\n\n      if (text == null || isString(text)) {\n        key = text;\n        options = props;\n\n        var notFound = restProps.notFound,\n            context = restProps.context,\n            rest2Props = __rest(restProps, [\"notFound\", \"context\"]);\n\n        restProps = rest2Props;\n      } else {\n        key = text.key;\n        options = text;\n      }\n\n      var aTag = tagF || tag;\n\n      var translation = _this.translate(key, options);\n\n      return aTag ? React.createElement(aTag, restProps, translation) : translation;\n    };\n\n    return MDText;\n  };\n\n  return MDText;\n}();\n\nexports.MDText = MDText;\nvar singleton = new MDText(null);\nexports[\"default\"] = singleton;","map":{"version":3,"sources":["/home/leno4ka/projects/study/artdecoration-on-reactjs/node_modules/i18n-react/dist/i18n-react.js"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","exports","__esModule","React","require","mdflavors_1","isString","String","isObject","o","isFunction","get","obj","path","spath","split","len","undefined","first","k","flatten","l","r","flush","push","_i","l_1","matcher","mdFlavor","inter","self","M","value","m","mdMatch","middle","tag","body","createElement","key","head","tail","rangeHit","node","val","range","match","resolveContextPath","context","trans","toString","_","resolveContext","ctx_keys","__","MDText","texts","opt","MDFlavor","notFound","factory","span","li","div","button","a","text","setOpts","setTexts","interpolate","exp","vars","_a","vn","flags","v","isValidElement","cloneElement","vs","toLocaleString","format","_this","mdFlavors","translate","options","tagF","props","restProps","rest2Props","aTag","translation","singleton"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nexports.__esModule = true;\nvar React = require(\"react\");\nvar mdflavors_1 = require(\"./mdflavors\");\nfunction isString(s) {\n    return typeof s === 'string' || s instanceof String;\n}\nfunction isObject(o) {\n    return typeof o === 'object';\n}\nfunction isFunction(o) {\n    return typeof o === 'function';\n}\nfunction get(obj, path) {\n    var spath = path.split('.');\n    for (var i = 0, len = spath.length; i < len; i++) {\n        if (!obj || !isObject(obj))\n            return undefined;\n        obj = obj[spath[i]];\n    }\n    return obj;\n}\nfunction first(o) {\n    for (var k in o) {\n        if (k != '__')\n            return o[k];\n    }\n}\nfunction flatten(l) {\n    var r = [];\n    var s = '';\n    var flush = function () { return s && (r.push(s), s = ''); };\n    for (var _i = 0, l_1 = l; _i < l_1.length; _i++) {\n        var i = l_1[_i];\n        if (i == null)\n            continue;\n        if (isString(i)) {\n            s += i;\n        }\n        else {\n            flush();\n            r.push(i);\n        }\n    }\n    flush();\n    return r.length > 1 ? r : (r.length ? r[0] : null);\n}\nvar matcher = /** @class */ (function () {\n    function matcher(mdFlavor, inter, self) {\n        this.mdFlavor = mdFlavor;\n        this.inter = inter;\n        this.self = self;\n    }\n    matcher.prototype.M = function (value) {\n        if (!value)\n            return null;\n        var m = mdflavors_1.mdMatch(this.mdFlavor, value);\n        if (!m)\n            return value;\n        var middle = null;\n        switch (m.tag) {\n            case \"inter\":\n                middle = this.inter && this.inter(m.body);\n                break;\n            case \"self\":\n                middle = this.self && this.self(m.body);\n                break;\n            case \"literals\":\n            case \"literal\":\n                middle = m.body;\n                break;\n            default:\n                middle = React.createElement(m.tag, { key: m.tag + m.body }, this.M(m.body));\n                break;\n        }\n        return flatten([this.M(m.head), middle, this.M(m.tail)]);\n    };\n    return matcher;\n}());\nfunction rangeHit(node, val) {\n    for (var t in node) {\n        if (!node.hasOwnProperty(t))\n            continue;\n        var range = t.match(/^(-?\\d+)\\.\\.(-?\\d+)$/);\n        if (range && (+range[1] <= val && val <= +range[2])) {\n            return node[t];\n        }\n    }\n}\nfunction resolveContextPath(node, p, path, context) {\n    var key = path[p];\n    var trans;\n    if (key != null && context[key] != null) {\n        trans = get(node, context[key].toString());\n        if (trans == null && (+context[key]) === context[key]) {\n            trans = rangeHit(node, +context[key]);\n        }\n    }\n    if (trans == null)\n        trans = node._;\n    if (trans == null)\n        trans = first(node);\n    if (trans != null && !isString(trans)) {\n        return resolveContextPath(trans, p + 1, path, context);\n    }\n    return trans;\n}\nfunction resolveContext(node, context) {\n    if (context == null) {\n        return resolveContextPath(node, 0, [], null);\n    }\n    else if (!isObject(context)) {\n        return resolveContextPath(node, 0, ['_'], { _: context });\n    }\n    else {\n        var ctx_keys = [];\n        if (node.__) {\n            ctx_keys = node.__.split('.');\n        }\n        else {\n            for (var k in context) {\n                if (!context.hasOwnProperty(k))\n                    continue;\n                ctx_keys.push(k);\n            }\n        }\n        return resolveContextPath(node, 0, ctx_keys, context);\n    }\n}\nvar MDText = /** @class */ (function () {\n    function MDText(texts, opt) {\n        this.texts = texts;\n        this.MDFlavor = 0;\n        // public access is deprecated\n        this.notFound = undefined;\n        this.p = this.factory('p');\n        this.span = this.factory('span');\n        this.li = this.factory('li');\n        this.div = this.factory('div');\n        this.button = this.factory('button');\n        this.a = this.factory('a');\n        this.text = this.factory(null);\n        this.setOpts(opt);\n    }\n    MDText.prototype.setTexts = function (texts, opt) {\n        this.texts = texts;\n        this.setOpts(opt);\n    };\n    MDText.prototype.setOpts = function (opt) {\n        if (!opt)\n            return;\n        if (opt.notFound !== undefined)\n            this.notFound = opt.notFound;\n        if (opt.MDFlavor !== undefined)\n            this.MDFlavor = opt.MDFlavor;\n    };\n    MDText.prototype.interpolate = function (exp, vars) {\n        var _a = exp.split(','), vn = _a[0], flags = _a[1];\n        var v = get(vars, vn);\n        if (v == null) {\n            return null;\n        }\n        else if (React.isValidElement(v)) {\n            return React.cloneElement(v, { key: 'r' });\n        }\n        var vs;\n        if (flags && flags.match(/l/)) {\n            vs = v.toLocaleString();\n        }\n        else {\n            vs = v.toString();\n        }\n        return vs;\n    };\n    MDText.prototype.format = function (value, vars) {\n        var _this = this;\n        if (!value)\n            return value;\n        return new matcher(mdflavors_1.mdFlavors[this.MDFlavor], function (exp) { return _this.interpolate(exp, vars); }, function (exp) { return _this.translate(exp, vars); }).M(value);\n    };\n    MDText.prototype.translate = function (key, options) {\n        if (!key)\n            return key;\n        var trans = get(this.texts, key);\n        var context = options && options.context;\n        if (trans != null && !(isString(trans) || isFunction(trans))) {\n            trans = resolveContext(trans, context);\n        }\n        if (trans == null) {\n            trans = (options && options.notFound !== undefined) ? options.notFound :\n                this.notFound !== undefined ? this.notFound :\n                    key;\n        }\n        if (isFunction(trans)) {\n            trans = trans(key, context);\n        }\n        return this.format(trans, options);\n    };\n    MDText.prototype.factory = function (tagF) {\n        var _this = this;\n        // name High Order Function for React Dev tools\n        var MDText = function (props) {\n            var text = props.text, tag = props.tag, restProps = __rest(props, [\"text\", \"tag\"]);\n            var key;\n            var options;\n            if (text == null || isString(text)) {\n                key = text;\n                options = props;\n                var notFound = restProps.notFound, context = restProps.context, rest2Props = __rest(restProps, [\"notFound\", \"context\"]);\n                restProps = rest2Props;\n            }\n            else {\n                key = text.key;\n                options = text;\n            }\n            var aTag = tagF || tag;\n            var translation = _this.translate(key, options);\n            return aTag ?\n                React.createElement(aTag, restProps, translation) :\n                translation;\n        };\n        return MDText;\n    };\n    return MDText;\n}());\nexports.MDText = MDText;\nvar singleton = new MDText(null);\nexports[\"default\"] = singleton;\n"]},"metadata":{},"sourceType":"script"}